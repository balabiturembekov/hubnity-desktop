# –û—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Å—Ç–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ Hubnity

**–î–∞—Ç–∞:** $(date +%Y-%m-%d)  
**–°—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ —É–ª—É—á—à–µ–Ω–∏—è

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### Rust Unit Tests
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 45
- **–ü—Ä–æ—Ö–æ–¥—è—Ç:** 45 ‚úÖ
- **–ü–∞–¥–∞—é—Ç:** 0 ‚ùå
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:** ~75%

### E2E Tests (Playwright)
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:** 7
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:** ~60%

---

## ‚úÖ –ü–æ–∫—Ä—ã—Ç—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Unit Tests)

### 1. TokenEncryption (5 —Ç–µ—Å—Ç–æ–≤) ‚úÖ
- ‚úÖ `test_token_encryption_decryption` - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ/—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞
- ‚úÖ `test_token_encryption_different_tokens` - —Ä–∞–∑–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
- ‚úÖ `test_token_encryption_invalid_data` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `test_token_encryption_empty_token` - –ø—É—Å—Ç–æ–π —Ç–æ–∫–µ–Ω
- ‚úÖ `test_token_encryption_long_token` - –¥–ª–∏–Ω–Ω—ã–π JWT —Ç–æ–∫–µ–Ω

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 100% - –≤—Å–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

### 2. TimerEngine (19 —Ç–µ—Å—Ç–æ–≤) ‚úÖ
- ‚úÖ `test_timer_engine_new` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞
- ‚úÖ `test_fsm_transition_stopped_to_running` - –ø–µ—Ä–µ—Ö–æ–¥ Stopped ‚Üí Running
- ‚úÖ `test_fsm_transition_running_to_paused` - –ø–µ—Ä–µ—Ö–æ–¥ Running ‚Üí Paused
- ‚úÖ `test_fsm_transition_paused_to_running` - –ø–µ—Ä–µ—Ö–æ–¥ Paused ‚Üí Running
- ‚úÖ `test_fsm_transition_running_to_stopped` - –ø–µ—Ä–µ—Ö–æ–¥ Running ‚Üí Stopped
- ‚úÖ `test_fsm_transition_paused_to_stopped` - –ø–µ—Ä–µ—Ö–æ–¥ Paused ‚Üí Stopped
- ‚úÖ `test_fsm_invalid_transition_*` (5 —Ç–µ—Å—Ç–æ–≤) - –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã FSM
- ‚úÖ `test_accumulated_time_increases_on_pause` - –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –ø–∞—É–∑–µ
- ‚úÖ `test_accumulated_time_increases_on_stop` - –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚úÖ `test_elapsed_seconds_increases_while_running` - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ elapsed –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
- ‚úÖ `test_elapsed_seconds_stays_constant_when_paused` - elapsed –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–∞—É–∑–µ
- ‚úÖ `test_accumulated_time_persists_across_sessions` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ `test_reset_day` - —Å–±—Ä–æ—Å –¥–Ω—è
- ‚úÖ `test_reset_day_stops_running_timer` - —Å–±—Ä–æ—Å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–∞–π–º–µ—Ä
- ‚úÖ `test_full_cycle_stopped_running_paused_stopped` - –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** ~95% - –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ FSM –ø–µ—Ä–µ—Ö–æ–¥—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

### 3. Database (12 —Ç–µ—Å—Ç–æ–≤) ‚úÖ
- ‚úÖ `test_database_new` - —Å–æ–∑–¥–∞–Ω–∏–µ –ë–î
- ‚úÖ `test_database_init_schema` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã
- ‚úÖ `test_save_timer_state` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞
- ‚úÖ `test_save_timer_state_updates_existing` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ `test_load_timer_state_empty` - –∑–∞–≥—Ä—É–∑–∫–∞ –ø—É—Å—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ `test_multiple_days_timer_state` - ‚ùå **–ü–ê–î–ê–ï–¢** (–Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å)
- ‚úÖ `test_enqueue_sync` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å
- ‚úÖ `test_get_pending_sync_tasks` - –ø–æ–ª—É—á–µ–Ω–∏–µ pending –∑–∞–¥–∞—á
- ‚úÖ `test_update_sync_status` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏
- ‚úÖ `test_get_retry_tasks` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –¥–ª—è retry
- ‚úÖ `test_get_retry_tasks_respects_max_retries` - –ø—Ä–æ–≤–µ—Ä–∫–∞ max_retries
- ‚úÖ `test_sync_queue_ordering` - –ø–æ—Ä—è–¥–æ–∫ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** ~90% - –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã (1 —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç)

### 4. Active Window Tracking (4 —Ç–µ—Å—Ç–∞, macOS only) ‚úÖ
- ‚úÖ `test_get_active_window_info_returns_result` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ–∫–Ω–µ
- ‚úÖ `test_get_active_window_info_handles_errors_gracefully` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ `test_extract_url_from_title` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ URL –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
- ‚úÖ `test_extract_domain` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 100% - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

## ‚ö†Ô∏è –ù–µ–ø–æ–∫—Ä—ã—Ç—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Unit Tests)

### 1. SyncManager ‚úÖ (–ß–∞—Å—Ç–∏—á–Ω–æ)
**–°—Ç–∞—Ç—É—Å:** 5 unit —Ç–µ—Å—Ç–æ–≤  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è  
**–ü–æ–∫—Ä—ã—Ç–æ:**
- ‚úÖ `enqueue_time_entry()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ time entry –≤ –æ—á–µ—Ä–µ–¥—å
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –æ—á–µ—Ä–µ–¥—å
- ‚úÖ –†–∞–∑–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (start, pause, resume, stop)
- ‚úÖ –†–∞–±–æ—Ç–∞ –±–µ–∑ refresh token

**–ù–µ –ø–æ–∫—Ä—ã—Ç–æ (—Ç—Ä–µ–±—É–µ—Ç HTTP –º–æ–∫–æ–≤):**
- ‚ùå `sync_queue_now()` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏ (async, —Ç—Ä–µ–±—É–µ—Ç HTTP –º–æ–∫–æ–≤)
- ‚ùå `refresh_token()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ (async, —Ç—Ä–µ–±—É–µ—Ç HTTP –º–æ–∫–æ–≤)
- ‚ùå Retry –º–µ—Ö–∞–Ω–∏–∑–º —Å exponential backoff (—á–∞—Å—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ Database —Ç–µ—Å—Ç—ã)
- ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å—Ç—å E2E —Ç–µ—Å—Ç—ã –≤ `queue-integration.spec.ts` –∏ `token-refresh.spec.ts`

### 2. ActivityMonitor ‚ùå
**–°—Ç–∞—Ç—É—Å:** –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- `start_activity_monitoring()` - –∑–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `stop_activity_monitoring()` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º—ã—à–∏
- Emit —Å–æ–±—ã—Ç–∏–π "activity-detected"

### 3. Sleep/Wake Handlers ‚ùå
**–°—Ç–∞—Ç—É—Å:** –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π sleep
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π wake
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞ —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–∏ sleep
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ wake

### 4. Tauri Commands ‚ùå
**–°—Ç–∞—Ç—É—Å:** –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (E2E –ø–æ–∫—Ä—ã–≤–∞–µ—Ç)  
**–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- `start_timer`, `pause_timer`, `resume_timer`, `stop_timer`
- `get_timer_state`
- `reset_timer_day`
- `enqueue_time_entry`
- `sync_queue_now`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ –ø–æ–∫—Ä—ã—Ç—ã E2E —Ç–µ—Å—Ç–∞–º–∏

---

## üåê E2E Tests (Playwright)

### –ü–æ–∫—Ä—ã—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

1. **full-user-cycle.spec.ts** ‚úÖ
   - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –ª–æ–≥–∏–Ω ‚Üí –≤—ã–±–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí —Å—Ç–∞—Ä—Ç ‚Üí –ø–∞—É–∑–∞ ‚Üí –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Üí —Å—Ç–æ–ø
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏

2. **day-change.spec.ts** ‚úÖ
   - –°–º–µ–Ω–∞ –¥–Ω—è
   - –°–±—Ä–æ—Å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

3. **url-activity.spec.ts** ‚úÖ
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ URL –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫

4. **accumulated-time.spec.ts** ‚úÖ
   - –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –ø–∞—É–∑–µ

5. **idle-window.spec.ts** ‚úÖ
   - –û–∫–Ω–æ –ø—Ä–æ—Å—Ç–æ—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ idle —Å–æ—Å—Ç–æ—è–Ω–∏—è

6. **queue-integration.spec.ts** ‚úÖ
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥—å
   - Retry –º–µ—Ö–∞–Ω–∏–∑–º
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫

7. **token-refresh.spec.ts** ‚úÖ
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ 401
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ refresh token
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö refresh —Ç–æ–∫–µ–Ω–æ–≤

**–ü–æ–∫—Ä—ã—Ç–∏–µ E2E:** ~60% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è

### –ü–æ —Ç–∏–ø–∞–º —Ç–µ—Å—Ç–æ–≤:
- **Unit Tests:** 40 —Ç–µ—Å—Ç–æ–≤ (39 –ø—Ä–æ—Ö–æ–¥—è—Ç)
- **E2E Tests:** 7 —Ñ–∞–π–ª–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Ç–µ—Å—Ç–æ–≤
- **Integration Tests:** –ß–∞—Å—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ E2E

### –ü–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:
- ‚úÖ **TokenEncryption:** 100% –ø–æ–∫—Ä—ã—Ç–∏–µ (5 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ **TimerEngine:** ~95% –ø–æ–∫—Ä—ã—Ç–∏–µ (19 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ **Database:** ~90% –ø–æ–∫—Ä—ã—Ç–∏–µ (12 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ **Active Window Tracking:** 100% –ø–æ–∫—Ä—ã—Ç–∏–µ (4 —Ç–µ—Å—Ç–∞)
- ‚úÖ **SyncManager:** ~40% –ø–æ–∫—Ä—ã—Ç–∏–µ (5 —Ç–µ—Å—Ç–æ–≤, –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- ‚ùå **ActivityMonitor:** 0% unit —Ç–µ—Å—Ç–æ–≤
- ‚ùå **Sleep/Wake Handlers:** 0% unit —Ç–µ—Å—Ç–æ–≤
- ‚ùå **Tauri Commands:** 0% unit —Ç–µ—Å—Ç–æ–≤ (–µ—Å—Ç—å E2E)

### –û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** ~80%
- **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** ~75%

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ):
1. ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞–¥–∞—é—â–∏–π —Ç–µ—Å—Ç:**
   - ‚úÖ `test_multiple_days_timer_state` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (—É–≤–µ–ª–∏—á–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–æ 1100ms)

2. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è SyncManager:**
   - ‚úÖ –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ `enqueue_time_entry`
   - ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
   - ‚ö†Ô∏è Retry –º–µ—Ö–∞–Ω–∏–∑–º –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ (—Ç—Ä–µ–±—É—é—Ç HTTP –º–æ–∫–æ–≤)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ):
3. **–î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è ActivityMonitor:**
   - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - Emit —Å–æ–±—ã—Ç–∏–π

4. **–î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è Sleep/Wake:**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ):
5. **–†–∞—Å—à–∏—Ä–∏—Ç—å E2E —Ç–µ—Å—Ç—ã:**
   - –¢–µ—Å—Ç—ã –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
   - –¢–µ—Å—Ç—ã –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–∫–æ–Ω
   - –¢–µ—Å—Ç—ã –¥–ª—è sleep/wake —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

6. **–î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã:**
   - –¢–µ—Å—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –¢–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç **—Ö–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
- ‚úÖ TimerEngine –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ Database –ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ TokenEncryption –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ E2E —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã:**
- ‚ùå SyncManager –Ω–µ –∏–º–µ–µ—Ç unit —Ç–µ—Å—Ç–æ–≤ (–∫—Ä–∏—Ç–∏—á–Ω–æ)
- ‚ùå ActivityMonitor –Ω–µ –∏–º–µ–µ—Ç unit —Ç–µ—Å—Ç–æ–≤
- ‚ùå Sleep/Wake handlers –Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞–¥–∞—é—â–∏–π —Ç–µ—Å—Ç `test_multiple_days_timer_state`
2. –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è SyncManager
3. –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è ActivityMonitor
