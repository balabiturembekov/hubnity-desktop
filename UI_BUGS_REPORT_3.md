# UI BUGS REPORT #3

**–î–∞—Ç–∞:** 2025-01-08  
**–°—Ç–∞—Ç—É—Å:** –ù–∞–π–¥–µ–Ω–æ 5 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∞–≥–æ–≤

---

## üî¥ BUG #12: –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ IdleWindow.tsx

**–§–∞–π–ª:** `src/components/IdleWindow.tsx`  
**–°—Ç—Ä–æ–∫–∏:** 57-105

**–ü—Ä–æ–±–ª–µ–º–∞:**
–°—Ç—Ä–æ–∫–∞ 57 –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `const setupListener = async () =>` –Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ `{` –ø–æ—Å–ª–µ —Å—Ç—Ä–µ–ª–∫–∏.

**–ö–æ–¥:**
```typescript
const setupListener = async () =>  // ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç {
  try {
    // ...
  }
```

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∫—Ä—ã–≤–∞—é—â—É—é —Å–∫–æ–±–∫—É: `const setupListener = async () => {`

---

## üî¥ BUG #13: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ useTrackerStore.ts

**–§–∞–π–ª:** `src/store/useTrackerStore.ts`  
**–°—Ç—Ä–æ–∫–∏:** 94-100

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤, `state.state.state` –±–æ–ª—å—à–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å `state.state`.

**–ö–æ–¥:**
```typescript
const currentTimerState = await TimerEngineAPI.getState();

if (currentTimerState.state.state === 'STOPPED') {  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
  await TimerEngineAPI.start();
} else if (currentTimerState.state.state === 'PAUSED') {  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
  await TimerEngineAPI.resume();
}
```

**–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `currentTimerState.state === 'STOPPED'` –≤–º–µ—Å—Ç–æ `currentTimerState.state.state === 'STOPPED'`

---

## üü° BUG #14: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ store isPaused –≤–º–µ—Å—Ç–æ timerState –≤ Timer.tsx

**–§–∞–π–ª:** `src/components/Timer.tsx`  
**–°—Ç—Ä–æ–∫–∏:** 127-144

**–ü—Ä–æ–±–ª–µ–º–∞:**
–î–ª—è idle time –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `isPaused` –∏–∑ store, –Ω–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å `timerState` –∏–∑ Rust.

**–ö–æ–¥:**
```typescript
useEffect(() => {
  if (isPaused && idlePauseStartTime) {  // ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç store isPaused
    // ...
  }
}, [isPaused, idlePauseStartTime]);
```

**–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `timerState?.state === 'PAUSED'` –≤–º–µ—Å—Ç–æ `isPaused` –∏–∑ store.

---

## üü° BUG #15: loadScreenshots –Ω–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö useEffect

**–§–∞–π–ª:** `src/components/ScreenshotsView.tsx`  
**–°—Ç—Ä–æ–∫–∏:** 77-79

**–ü—Ä–æ–±–ª–µ–º–∞:**
`loadScreenshots` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `useEffect`, –Ω–æ –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –≤–µ—Ä—Å–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏.

**–ö–æ–¥:**
```typescript
useEffect(() => {
  loadScreenshots();  // ‚ùå loadScreenshots –Ω–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
}, [timeEntryId]);
```

**–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useCallback` –¥–ª—è `loadScreenshots` –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

---

## üü° BUG #16: –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ isTracking –∏ isPaused –≤ Timer.tsx

**–§–∞–π–ª:** `src/components/Timer.tsx`  
**–°—Ç—Ä–æ–∫–∏:** 19-31

**–ü—Ä–æ–±–ª–µ–º–∞:**
`isTracking` –∏ `isPaused` –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ store, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `timerState`). –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—É—Ç–∞–Ω–∏—Ü–µ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –±–∞–≥–∞–º.

**–ö–æ–¥:**
```typescript
const {
  selectedProject,
  isTracking,  // ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
  isPaused,    // ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é (–∫—Ä–æ–º–µ idle time)
  // ...
} = useTrackerStore();
```

**–†–µ—à–µ–Ω–∏–µ:**
–£–±—Ä–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è idle time).

---

## ‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ):
1. **BUG #12**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É –≤ IdleWindow.tsx
2. **BUG #13**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ useTrackerStore.ts

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ):
3. **BUG #14**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å timerState –≤–º–µ—Å—Ç–æ store isPaused –¥–ª—è idle time
4. **BUG #15**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ ScreenshotsView.tsx
5. **BUG #16**: –£–±—Ä–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üìù –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É –≤ IdleWindow.tsx
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ useTrackerStore.ts (state.state ‚Üí state)
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å timerState –¥–ª—è idle time –ø—Ä–æ–≤–µ—Ä–∫–∏
4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ ScreenshotsView.tsx
5. –û—á–∏—Å—Ç–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 2025-01-08  
**–ù–∞–π–¥–µ–Ω–æ 5 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∞–≥–æ–≤ –≤ UI**
