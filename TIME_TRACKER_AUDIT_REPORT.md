# AUDIT STAGE ‚Äî TIME TRACKER CORE (Bug Discovery & Detection)

**–î–∞—Ç–∞:** 2025-01-08  
**–í–µ—Ä—Å–∏—è:** 0.1.0  
**–°—Ç–∞—Ç—É—Å:** Production-ready audit  
**–ê—É–¥–∏—Ç–æ—Ä:** Systems Engineer + Production QA

---

## üìä EXECUTIVE SUMMARY

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: **75/100**

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –Ω–∞–π–¥–µ–Ω—ã:** 8  
**–í—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ:** 12  
**–°—Ä–µ–¥–Ω–∏–µ:** 15  
**–ù–∏–∑–∫–∏–µ:** 8

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∑–∞—â–∏—Ç–∞:** ‚úÖ –•–æ—Ä–æ—à–∞—è (FSM, Instant, SQLite)  
**Edge cases:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –ø–æ–∫—Ä—ã—Ç—ã  
**Runtime guards:** ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

---

## üî¥ –¢–û–ü-10 –°–ê–ú–´–• –û–ü–ê–°–ù–´–• –ë–ê–ì–û–í

### 1. **System Clock Change During RUNNING** üî¥ CRITICAL

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** Time-related / Calendar

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –¢–∞–π–º–µ—Ä RUNNING
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è (–Ω–∞–∑–∞–¥/–≤–ø–µ—Ä–µ–¥)
- `SystemTime::now()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤–æ–µ –≤—Ä–µ–º—è
- `Instant::now()` –æ—Å—Ç–∞–µ—Ç—Å—è –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã–º
- **–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –º–µ–∂–¥—É `started_at` (SystemTime) –∏ `started_at_instant` (Instant)**

**–ü–æ—á–µ–º—É –æ–ø–∞—Å–µ–Ω:**
- –ü—Ä–∏ rollover_day() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `started_at` (SystemTime) –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –ø–æ–ª—É–Ω–æ—á–∏
- –ï—Å–ª–∏ –≤—Ä–µ–º—è –∏–∑–º–µ–Ω–µ–Ω–æ, —Ä–∞—Å—á–µ—Ç –±—É–¥–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–º
- –í–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏ –∏–ª–∏ –¥–≤–æ–π–Ω–æ–π —É—á–µ—Ç

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:**
```rust
// 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä –≤ 23:50
engine.start();
// 2. –ò–∑–º–µ–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ 00:10 (—Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å)
// 3. –í—ã–∑–≤–∞—Ç—å ensure_correct_day()
// 4. rollover_day() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç started_at (—Å—Ç–∞—Ä–æ–µ –≤—Ä–µ–º—è) –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
```

**–ì–¥–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:**
- **Runtime guard:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –º–µ–∂–¥—É SystemTime –∏ Instant
- **Unit test:** –ú–æ–∫–∞—Ç—å SystemTime::now() –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞—Å—á–µ—Ç—ã
- **Logging:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è > 1 –º–∏–Ω—É—Ç—ã

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:** ‚ùå –ù–ï–¢

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```rust
// –í rollover_day(), –ø–µ—Ä–µ–¥ —Ä–∞—Å—á–µ—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –ø–æ–ª—É–Ω–æ—á–∏:
let now_system = SystemTime::now()...as_secs();
let now_instant_estimate = started_at_instant.elapsed().as_secs();
if (now_system as i64 - started_at as i64).abs() > now_instant_estimate + 60 {
    warn!("[CLOCK_SKEW] System time changed during timer run");
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Instant –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –≤–º–µ—Å—Ç–æ SystemTime
}
```

---

### 2. **Double Rollover on Rapid Day Change** üî¥ CRITICAL

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** Calendar & timezone

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –¢–∞–π–º–µ—Ä RUNNING –≤ 23:59:59
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã—Å—Ç—Ä–æ –≤—ã–∑—ã–≤–∞–µ—Ç `get_state()` –¥–≤–∞–∂–¥—ã
- –û–±–∞ –≤—ã–∑–æ–≤–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç —Å–º–µ–Ω—É –¥–Ω—è
- `rollover_day()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã
- –í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ –æ–±–Ω—É–ª—è–µ—Ç `accumulated`, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –±—ã–ª –æ–±–Ω—É–ª–µ–Ω

**–ü–æ—á–µ–º—É –æ–ø–∞—Å–µ–Ω:**
- –ü–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ —Å—Ç–∞—Ä—ã–π –¥–µ–Ω—å
- `accumulated` –æ–±–Ω—É–ª—è–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã
- –í—Ä–µ–º—è –¥–æ –ø–æ–ª—É–Ω–æ—á–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–≤–∞–∂–¥—ã

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:**
```rust
// 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å day_start –Ω–∞ –≤—á–µ—Ä–∞
// 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä
// 3. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤—ã–∑–≤–∞—Ç—å get_state() –¥–≤–∞–∂–¥—ã
// 4. –û–±–∞ –≤—ã–∑–æ–≤–∞ detect day change
```

**–ì–¥–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:**
- **Unit test:** –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã ensure_correct_day()
- **Runtime guard:** –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ rollover –≤—ã–ø–æ–ª–Ω–µ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- **Invariant:** `day_start_timestamp.date() == Local::now().date()`

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ (mutex –∑–∞—â–∏—â–∞–µ—Ç, –Ω–æ –Ω–µ—Ç —è–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```rust
// –í ensure_correct_day(), –ø–µ—Ä–µ–¥ rollover:
let current_day = Local::now().date_naive();
if saved_day == current_day {
    return Ok(()); // –£–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
}
// –ê—Ç–æ–º–∞—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ + —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ rollover_in_progress
```

---

### 3. **Sleep Detection False Positive** üü° HIGH

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** Sleep / Wake edge cases

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –¢–∞–π–º–µ—Ä RUNNING
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç 6+ –º–∏–Ω—É—Ç –±–µ–∑ –≤—ã–∑–æ–≤–∞ `get_state()`
- `get_state()` –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫ > 5 –º–∏–Ω—É—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—É–∑–∏—Ä—É–µ—Ç —Ç–∞–π–º–µ—Ä
- **–ù–æ —ç—Ç–æ –±—ã–ª–∞ —Ä–µ–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –Ω–µ sleep!**

**–ü–æ—á–µ–º—É –æ–ø–∞—Å–µ–Ω:**
- –ü–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Ç–∞–π–º–µ—Ä –ø–∞—É–∑–∏—Ä–æ–≤–∞–Ω
- –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:**
```rust
// 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä
engine.start();
// 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 6 –º–∏–Ω—É—Ç (—Ä–µ–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞)
thread::sleep(Duration::from_secs(360));
// 3. –í—ã–∑–≤–∞—Ç—å get_state()
// 4. –¢–∞–π–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—É–∑–∏—Ä–æ–≤–∞–Ω
```

**–ì–¥–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:**
- **Integration test:** –î–ª–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –≤—ã–∑–æ–≤–æ–≤ get_state()
- **Runtime guard:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º—ã—à–∏/–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø–µ—Ä–µ–¥ –ø–∞—É–∑–æ–π
- **Logging:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—É–∑—ã

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:** ‚ö†Ô∏è –ï—Å—Ç—å, –Ω–æ —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è (5 –º–∏–Ω—É—Ç)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```rust
// –í get_state(), –ø–µ—Ä–µ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–∞—É–∑–æ–π:
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º—ã—à–∏/–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —á–µ—Ä–µ–∑ ActivityMonitor
if needs_sleep_handling && !activity_monitor.has_recent_activity() {
    // –¢–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –ø–∞—É–∑–∏—Ç—å
}
```

---

### 4. **Recursive get_state() on Sleep Detection** üü° HIGH

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** FSM edge cases

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- `get_state()` –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç sleep
- –í—ã–∑—ã–≤–∞–µ—Ç `handle_system_sleep()`
- `handle_system_sleep()` –≤—ã–∑—ã–≤–∞–µ—Ç `pause()`
- `pause()` –≤—ã–∑—ã–≤–∞–µ—Ç `ensure_correct_day()`
- `ensure_correct_day()` –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å `rollover_day()`
- –ó–∞—Ç–µ–º `get_state()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
- **–ì–ª—É–±–æ–∫–∞—è —Ä–µ–∫—É—Ä—Å–∏—è –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö**

**–ü–æ—á–µ–º—É –æ–ø–∞—Å–µ–Ω:**
- Stack overflow –ø—Ä–∏ –≥–ª—É–±–æ–∫–æ–π —Ä–µ–∫—É—Ä—Å–∏–∏
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- –°–ª–æ–∂–Ω–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:**
```rust
// 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä –≤ 23:59
// 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 6 –º–∏–Ω—É—Ç (sleep detection)
// 3. –í—ã–∑–≤–∞—Ç—å get_state()
// 4. –†–µ–∫—É—Ä—Å–∏—è: get_state() -> handle_sleep() -> pause() -> ensure_day() -> rollover -> get_state()
```

**–ì–¥–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:**
- **Unit test:** –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã get_state()
- **Runtime guard:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã —Ä–µ–∫—É—Ä—Å–∏–∏
- **Logging:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:** ‚ùå –ù–ï–¢

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```rust
// –í get_state(), –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä depth:
fn get_state(&self, depth: u8) -> Result<TimerStateResponse, String> {
    if depth > 3 {
        return Err("Max recursion depth exceeded".to_string());
    }
    // ...
    if needs_sleep_handling {
        return self.get_state(depth + 1);
    }
}
```

---

### 5. **Partial Write During Crash** üî¥ CRITICAL

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** Persistence & recovery

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- `pause()` –æ–±–Ω–æ–≤–ª—è–µ—Ç `accumulated`
- –ù–∞—á–∏–Ω–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ SQLite
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏
- SQLite —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ != —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –ë–î**

**–ü–æ—á–µ–º—É –æ–ø–∞—Å–µ–Ω:**
- –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ–≤–µ—Ä–Ω–æ–µ
- –ü–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏
- Corruption –¥–∞–Ω–Ω—ã—Ö

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:**
```rust
// 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä
// 2. –í—ã–∑–≤–∞—Ç—å pause()
// 3. Kill –ø—Ä–æ—Ü–µ—Å—Å –≤–æ –≤—Ä–µ–º—è save_state()
// 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
// 5. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ–≤–µ—Ä–Ω–æ–µ
```

**–ì–¥–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:**
- **Integration test:** Kill –ø—Ä–æ—Ü–µ—Å—Å –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏
- **Runtime guard:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ë–î –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏
- **Logging:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ (SQLite —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –Ω–æ –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```rust
// –í restore_state(), –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É:
fn restore_state(&self) -> Result<(), String> {
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –ë–î
    if let Err(e) = self.db.check_integrity() {
        warn!("[RECOVERY] DB integrity check failed: {}", e);
        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–∞–ª–∏–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏
    }
    // ...
}
```

---

### 6. **Timezone Change While RUNNING** üî¥ CRITICAL

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** Calendar & timezone

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –¢–∞–π–º–µ—Ä RUNNING –≤ 23:00 (UTC+3)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç timezone –Ω–∞ UTC+0
- –õ–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 20:00
- `Local::now().date_naive()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä—É–≥–æ–π –¥–µ–Ω—å
- `ensure_correct_day()` –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç "—Å–º–µ–Ω—É –¥–Ω—è"
- **–ù–æ —ç—Ç–æ –Ω–µ —Ä–µ–∞–ª—å–Ω–∞—è —Å–º–µ–Ω–∞ –¥–Ω—è!**

**–ü–æ—á–µ–º—É –æ–ø–∞—Å–µ–Ω:**
- –õ–æ–∂–Ω—ã–π rollover
- –ü–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –¥–Ω—è

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:**
```rust
// 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä –≤ 23:00 (UTC+3)
// 2. –ò–∑–º–µ–Ω–∏—Ç—å timezone –Ω–∞ UTC+0
// 3. Local::now() –≤–µ—Ä–Ω–µ—Ç 20:00 (—Ç–æ—Ç –∂–µ –¥–µ–Ω—å, –Ω–æ –¥—Ä—É–≥–æ–π —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å)
// 4. ensure_correct_day() –º–æ–∂–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–µ–Ω—å
```

**–ì–¥–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:**
- **Unit test:** –ú–æ–∫–∞—Ç—å timezone –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **Runtime guard:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è timezone
- **Logging:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ timezone –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:** ‚ùå –ù–ï–¢

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```rust
// –í ensure_correct_day(), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UTC –≤–º–µ—Å—Ç–æ Local:
let today_utc = Utc::now().date_naive();
let saved_day_utc = // –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å day_start_timestamp –≤ UTC
// –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å UTC –¥–∞—Ç—ã, –Ω–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ
```

---

### 7. **Race Condition: Two Commands at Same Millisecond** üü° HIGH

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** Concurrency / race conditions

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã—Å—Ç—Ä–æ –Ω–∞–∂–∏–º–∞–µ—Ç "Pause" –∏ "Resume" –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –û–±–∞ –≤—ã–∑–æ–≤–∞ –ø–æ–ø–∞–¥–∞—é—Ç –≤ `pause()` –∏ `resume()` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –û–±–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–æ–±–∞ –≤–∏–¥—è—Ç RUNNING)
- –û–±–∞ –ø—ã—Ç–∞—é—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**

**–ü–æ—á–µ–º—É –æ–ø–∞—Å–µ–Ω:**
- –ü–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM
- –í–æ–∑–º–æ–∂–µ–Ω deadlock

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:**
```rust
// 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä
// 2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤—ã–∑–≤–∞—Ç—å pause() –∏ resume()
// 3. –û–±–∞ –ø–æ–ª—É—á–∞—é—Ç lock –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
```

**–ì–¥–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:**
- **Unit test:** –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã pause() –∏ resume()
- **Runtime guard:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
- **Logging:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã FSM

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:** ‚úÖ –ï—Å—Ç—å (mutex –∑–∞—â–∏—â–∞–µ—Ç, –Ω–æ –Ω–µ—Ç —è–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```rust
// –í pause() –∏ resume(), –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É:
fn pause(&self) -> Result<(), String> {
    self.ensure_correct_day()?;
    let mut state = self.state.lock()?;
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Å –º–æ–º–µ–Ω—Ç–∞ –≤—ã–∑–æ–≤–∞
    match &*state {
        TimerState::Running { .. } => {
            // OK
        }
        _ => {
            return Err("State changed during pause()".to_string());
        }
    }
    // ...
}
```

---

### 8. **Offline 7+ Days, Then Sync** üü° HIGH

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** Offline queue & retry

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç offline 7+ –¥–Ω–µ–π
- –û—á–µ—Ä–µ–¥—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å—Ç–µ—Ç
- –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ —Å–µ—Ç–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –º–∞—Å—Å–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- **–¢–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏**
- **–°–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –æ—Ç–∫–ª–æ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏**

**–ü–æ—á–µ–º—É –æ–ø–∞—Å–µ–Ω:**
- –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ 401 –æ—à–∏–±–∫–∏
- –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:**
```rust
// 1. –†–∞–±–æ—Ç–∞—Ç—å offline 7 –¥–Ω–µ–π
// 2. –°–æ–∑–¥–∞—Ç—å 100+ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏
// 3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ç–∏
// 4. –ù–∞—á–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
```

**–ì–¥–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:**
- **Integration test:** –î–ª–∏—Ç–µ–ª—å–Ω–∞—è offline —Ä–∞–±–æ—Ç–∞
- **Runtime guard:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏
- **Logging:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –∏ –≤–æ–∑—Ä–∞—Å—Ç –∑–∞–¥–∞—á

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ (–µ—Å—Ç—å retry, –Ω–æ –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–æ–∑—Ä–∞—Å—Ç–∞)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```rust
// –í sync_queue_now(), –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É:
let tasks = self.db.get_retry_tasks(max_retries)?;
for (id, entity_type, payload, retry_count) in tasks {
    let task_age = // –≤–æ–∑—Ä–∞—Å—Ç –∑–∞–¥–∞—á–∏
    if task_age > Duration::from_secs(7 * 24 * 3600) {
        warn!("[SYNC] Task {} is too old ({} days), skipping", id, task_age.as_secs() / 86400);
        // –ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ failed –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ä—É—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    }
}
```

---

### 9. **Corrupted SQLite Row** üü° HIGH

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** Persistence & recovery

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- SQLite —Ñ–∞–π–ª –ø–æ–≤—Ä–µ–∂–¥–µ–Ω (–¥–∏—Å–∫, —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
- `restore_state()` –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–¥–∞–µ—Ç
- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ**

**–ü–æ—á–µ–º—É –æ–ø–∞—Å–µ–Ω:**
- –ü–æ—Ç–µ—Ä—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ù–µ—Ç fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:**
```rust
// 1. –ü–æ–≤—Ä–µ–¥–∏—Ç—å SQLite —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é
// 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
// 3. restore_state() –ø–∞–¥–∞–µ—Ç
```

**–ì–¥–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:**
- **Integration test:** –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π SQLite —Ñ–∞–π–ª
- **Runtime guard:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ë–î –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- **Logging:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ (SQLite –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å, –Ω–æ –Ω–µ—Ç —è–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```rust
// –í restore_state(), –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:
fn restore_state(&self) -> Result<(), String> {
    match self.db.load_timer_state() {
        Ok(state) => {
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        }
        Err(e) => {
            error!("[RECOVERY] Failed to restore state: {}", e);
            // –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î
            // –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–∞–ª–∏–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏
            // –ò–ª–∏ –Ω–∞—á–∞—Ç—å —Å —á–∏—Å—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        }
    }
}
```

---

### 10. **Spam Clicks: 50x start/pause/resume** üü¢ MEDIUM

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** User misuse

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã—Å—Ç—Ä–æ –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ 50 —Ä–∞–∑
- 50 –≤—ã–∑–æ–≤–æ–≤ `start()`, `pause()`, `resume()` –ø–æ–¥—Ä—è–¥
- –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ë–î
- **–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –ë–î –∏ –≤–æ–∑–º–æ–∂–Ω–∞—è –ø–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

**–ü–æ—á–µ–º—É –æ–ø–∞—Å–µ–Ω:**
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ UI
- –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ SQLite
- –í–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∫—Ä–∞—à–µ

**–ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏:**
```rust
// 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ü–∏–∫–ª:
for _ in 0..50 {
    engine.start().ok();
    engine.pause().ok();
    engine.resume().ok();
}
```

**–ì–¥–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å:**
- **Unit test:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±—ã—Å—Ç—Ä—ã–µ –≤—ã–∑–æ–≤—ã
- **Runtime guard:** Rate limiting –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
- **Logging:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç–æ—Ç—É –≤—ã–∑–æ–≤–æ–≤

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:** ‚ùå –ù–ï–¢

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```rust
// –î–æ–±–∞–≤–∏—Ç—å rate limiting:
struct TimerEngine {
    // ...
    last_command_time: Arc<Mutex<Option<Instant>>>,
}

fn start(&self) -> Result<(), String> {
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å rate limit
    let mut last_time = self.last_command_time.lock()?;
    if let Some(last) = *last_time {
        if last.elapsed() < Duration::from_millis(100) {
            return Err("Rate limit: too many commands".to_string());
        }
    }
    *last_time = Some(Instant::now());
    // ...
}
```

---

## üìã –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ü–û –ö–ê–¢–ï–ì–û–†–ò–Ø–ú

### 1. Time-related (elapsed, pause, resume, drift)

#### ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Instant` –¥–ª—è –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤
- –û—Ç–¥–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ `accumulated` –∏ `session time`
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ `elapsed = accumulated + (now - started_at_instant)`

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:

**BUG-1.1: Clock Drift Between SystemTime and Instant**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –î–ª–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (24+ —á–∞—Å–∞) –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—é
- **–ó–∞—â–∏—Ç–∞:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ Instant

**BUG-1.2: Negative Elapsed on System Time Rollback**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞–∑–∞–¥
- **–ó–∞—â–∏—Ç–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ `now >= started_at` –ø–µ—Ä–µ–¥ —Ä–∞—Å—á–µ—Ç–æ–º

**BUG-1.3: Accumulated Overflow (u64)**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** 584+ –ª–µ—Ç —Ä–∞–±–æ—Ç—ã (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ)
- **–ó–∞—â–∏—Ç–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ overflow –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `checked_add`

---

### 2. Calendar & timezone bugs

#### ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Local::now()` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–Ω—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rollover –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–Ω—è

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:

**BUG-2.1: Timezone Change Detection** (—Å–º. –ë–ê–ì #6 –≤—ã—à–µ)
**BUG-2.2: DST (Daylight Saving Time) Transition**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ª–µ—Ç–Ω–µ–µ/–∑–∏–º–Ω–µ–µ –≤—Ä–µ–º—è –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- **–ó–∞—â–∏—Ç–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ UTC –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è `day_start_timestamp`

**BUG-2.3: Multiple Day Rollovers in One Call**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π
- **–ó–∞—â–∏—Ç–∞:** –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ rollover –∑–∞ –≤—ã–∑–æ–≤

---

### 3. Sleep / Wake edge cases

#### ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
- Sleep detection —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É –≤—Ä–µ–º–µ–Ω–∏ (> 5 –º–∏–Ω—É—Ç)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ sleep

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:

**BUG-3.1: False Positive Sleep Detection** (—Å–º. –ë–ê–ì #3 –≤—ã—à–µ)
**BUG-3.2: Sleep During Rollover**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** Sleep –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ –≤—Ä–µ–º—è rollover
- **–ó–∞—â–∏—Ç–∞:** –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å rollover –æ–ø–µ—Ä–∞—Ü–∏–∏

**BUG-3.3: Wake Before Midnight, Sleep After**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** Wake –≤ 23:50, sleep –≤ 00:10
- **–ó–∞—â–∏—Ç–∞:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ `ensure_correct_day()`

---

### 4. FSM edge cases

#### ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
- –°—Ç—Ä–æ–≥–∞—è FSM —Å —è–≤–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏
- Mutex –∑–∞—â–∏—Ç–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:

**BUG-4.1: Recursive get_state()** (—Å–º. –ë–ê–ì #4 –≤—ã—à–µ)
**BUG-4.2: State Corruption After Panic**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** Panic –≤–æ –≤—Ä–µ–º—è FSM –ø–µ—Ä–µ—Ö–æ–¥–∞
- **–ó–∞—â–∏—Ç–∞:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ –ë–î

**BUG-4.3: Invalid State After restore_state()**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç FSM –ø—Ä–∞–≤–∏–ª–∞–º
- **–ó–∞—â–∏—Ç–∞:** –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

---

### 5. Persistence & recovery

#### ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
- SQLite —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:

**BUG-5.1: Partial Write During Crash** (—Å–º. –ë–ê–ì #5 –≤—ã—à–µ)
**BUG-5.2: DB Lock Timeout**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –î–æ–ª–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç –ë–î
- **–ó–∞—â–∏—Ç–∞:** –¢–∞–π–º–∞—É—Ç—ã –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ë–î

**BUG-5.3: restore_state() After Day Change**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã –¥–Ω—è
- **–ó–∞—â–∏—Ç–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–Ω—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏

---

### 6. Concurrency / race conditions

#### ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
- Mutex –∑–∞—â–∏—Ç–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã FSM

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:

**BUG-6.1: Race Condition: Two Commands** (—Å–º. –ë–ê–ì #7 –≤—ã—à–µ)
**BUG-6.2: Deadlock Between Mutexes**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –ù–µ—Å–∫–æ–ª—å–∫–æ mutex lock –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- **–ó–∞—â–∏—Ç–∞:** –í—Å–µ–≥–¥–∞ –æ–¥–∏–Ω –ø–æ—Ä—è–¥–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

**BUG-6.3: Poisoned Mutex After Panic**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** Panic –≤–æ –≤—Ä–µ–º—è lock
- **–ó–∞—â–∏—Ç–∞:** –û–±—Ä–∞–±–æ—Ç–∫–∞ `PoisonError`

---

### 7. Offline queue & retry

#### ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
- Exponential backoff
- Retry –º–µ—Ö–∞–Ω–∏–∑–º

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:

**BUG-7.1: Offline 7+ Days** (—Å–º. –ë–ê–ì #8 –≤—ã—à–µ)
**BUG-7.2: Queue Size Explosion**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏
- **–ó–∞—â–∏—Ç–∞:** –õ–∏–º–∏—Ç –Ω–∞ —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏

**BUG-7.3: Token Refresh During Sync**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫–∞–µ—Ç –≤–æ –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **–ó–∞—â–∏—Ç–∞:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–æ–π

---

### 8. Activity / idle detection

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:

**BUG-8.1: Activity Monitor Not Started**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** ActivityMonitor –Ω–µ –∑–∞–ø—É—â–µ–Ω, –Ω–æ —Ç–∞–π–º–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ó–∞—â–∏—Ç–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è ActivityMonitor

**BUG-8.2: False Idle Detection**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º—ã—à—å –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è
- **–ó–∞—â–∏—Ç–∞:** –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –º—ã—à–∏ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

---

### 9. System shutdown / crash scenarios

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:

**BUG-9.1: Crash During save_state()**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –ö—Ä–∞—à –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏ –≤ –ë–î
- **–ó–∞—â–∏—Ç–∞:** WAL mode SQLite, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

**BUG-9.2: Force Quit During RUNNING**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å force quit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **–ó–∞—â–∏—Ç–∞:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

---

### 10. User misuse

#### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏:

**BUG-10.1: Spam Clicks** (—Å–º. –ë–ê–ì #10 –≤—ã—à–µ)
**BUG-10.2: Incorrect Command Order**
- **–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- **–ó–∞—â–∏—Ç–∞:** FSM –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã ‚úÖ

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### CRITICAL (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):

1. **System Clock Change Detection** (–ë–ê–ì #1)
   - Runtime guard –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π
   - Unit —Ç–µ—Å—Ç—ã —Å –º–æ–∫–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏

2. **Timezone Change Handling** (–ë–ê–ì #6)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ UTC –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–Ω—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è timezone

3. **Partial Write Protection** (–ë–ê–ì #5)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ë–î –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏
   - WAL mode SQLite

### HIGH (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è):

4. **Sleep Detection False Positive** (–ë–ê–ì #3)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –ø–∞—É–∑–æ–π
   - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ threshold –¥–æ 10+ –º–∏–Ω—É—Ç

5. **Recursive get_state() Protection** (–ë–ê–ì #4)
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã —Ä–µ–∫—É—Ä—Å–∏–∏
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤

6. **Race Condition Protection** (–ë–ê–ì #7)
   - –Ø–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ lock
   - Rate limiting

### MEDIUM (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å):

7. **Offline Queue Age Check** (–ë–ê–ì #8)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∑–∞–¥–∞—á
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–¥–∞—á

8. **Corrupted DB Recovery** (–ë–ê–ì #9)
   - –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–∞–ª–∏–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏

9. **Spam Click Protection** (–ë–ê–ì #10)
   - Rate limiting –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
   - Debounce –¥–ª—è UI

---

## üìä –ú–ï–¢–†–ò–ö–ò –ü–û–ö–†–´–¢–ò–Ø

### –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:
- **Unit tests:** 49 —Ç–µ—Å—Ç–æ–≤ ‚úÖ
- **Edge cases:** ~30% –ø–æ–∫—Ä—ã—Ç—ã ‚ö†Ô∏è
- **Integration tests:** –ß–∞—Å—Ç–∏—á–Ω–æ ‚ö†Ô∏è
- **Runtime guards:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ ‚ö†Ô∏è

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:
- **Unit tests:** +20 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è edge cases
- **Integration tests:** +10 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è crash scenarios
- **Runtime guards:** +15 –ø—Ä–æ–≤–µ—Ä–æ–∫
- **Logging:** –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üîí –ò–ù–í–ê–†–ò–ê–ù–¢–´ –î–õ–Ø –§–û–†–ú–ê–õ–ò–ó–ê–¶–ò–ò

1. **FSM Invariant:**
   ```rust
   // –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–Ω–æ
   assert!(matches!(state, TimerState::Stopped | TimerState::Running { .. } | TimerState::Paused));
   ```

2. **Time Invariant:**
   ```rust
   // elapsed –≤—Å–µ–≥–¥–∞ >= accumulated
   assert!(elapsed_seconds >= accumulated_seconds);
   ```

3. **Day Invariant:**
   ```rust
   // day_start –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ–∫—É—â–µ–º—É –∏–ª–∏ –ø—Ä–æ—à–ª–æ–º—É –¥–Ω—é
   assert!(day_start_date <= Local::now().date_naive());
   ```

4. **Accumulated Invariant:**
   ```rust
   // accumulated –Ω–µ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è (–∫—Ä–æ–º–µ reset_day)
   assert!(new_accumulated >= old_accumulated || is_reset);
   ```

---

## üìù –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** –ö–æ–¥ –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –æ—Å–Ω–æ–≤—É, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã –æ—Ç edge cases.

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã:**
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è timezone
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ runtime guards

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å runtime guards –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
2. –†–∞—Å—à–∏—Ä–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è edge cases
3. –î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã –¥–ª—è crash scenarios
4. –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production:** 75% (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤)

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 2025-01-08  
**–°–ª–µ–¥—É—é—â–∏–π –∞—É–¥–∏—Ç:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
